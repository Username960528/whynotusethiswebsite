<!DOCTYPE html>
<html lang="ru">

<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>whynotusethis.website</title>

     <!-- Tailwind CSS for rapid styling -->
     <script src="https://cdn.tailwindcss.com"></script>

     <!-- Google Fonts: Inter -->
     <link rel="preconnect" href="https://fonts.googleapis.com">
     <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
     <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">

     <!-- three.js core library -->
     <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

     <!-- three.js post-processing effects - FIXED DEPENDENCIES -->
     <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/Pass.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/CopyShader.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/ShaderPass.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/DigitalGlitch.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/GlitchPass.js"></script>


     <style>
          /* Custom styles for the futuristic look and feel */
          body {
               font-family: 'Inter', sans-serif;
               background-color: #0a0a0a;
               color: #e0e0e0;
               overflow-x: hidden;
          }

          /* The canvas for our 3D scene will be fixed in the background */
          #bg-canvas {
               position: fixed;
               top: 0;
               left: 0;
               width: 100%;
               height: 100%;
               z-index: -1;
               opacity: 0.6;
               /* Slightly increased opacity for better star visibility */
               transition: opacity 0.5s ease-out;
               /* Add transition for smooth opacity change */
          }

          /* Glassmorphism effect for cards and sections */
          .glass-effect {
               background: rgba(16, 16, 16, 0.6);
               backdrop-filter: blur(10px);
               -webkit-backdrop-filter: blur(10px);
               border: 1px solid rgba(255, 255, 255, 0.1);
          }

          /* Custom gradient text */
          .gradient-text {
               background: linear-gradient(90deg, #4f46e5, #db2777);
               -webkit-background-clip: text;
               -webkit-text-fill-color: transparent;
          }

          /* Scroll-reveal animation */
          .reveal {
               opacity: 0;
               transform: translateY(50px);
               transition: opacity 0.8s ease-out, transform 0.8s ease-out;
          }

          .reveal.visible {
               opacity: 1;
               transform: translateY(0);
          }

          /* Project card hover effect */
          .project-card {
               transition: transform 0.3s ease, box-shadow 0.3s ease;
          }

          .project-card:hover {
               transform: translateY(-10px) scale(1.03);
               box-shadow: 0 20px 30px rgba(0, 0, 0, 0.4), 0 0 40px rgba(79, 70, 229, 0.5);
          }

          /* Typing cursor effect */
          .typewriter h1 {
               overflow: hidden;
               border-right: .15em solid #4f46e5;
               white-space: nowrap;
               margin: 0 auto;
               letter-spacing: .1em;
               animation:
                    typing 3.5s steps(30, end) forwards,
                    blink-caret .75s step-end infinite;
          }

          /* The question mark animation is now triggered by a single class and controlled by a CSS variable */
          .typewriter.glitch-active h1::after {
               content: '';
               display: inline-block;
               /* --glitch-iterations is set by JS */
               animation: glitch-and-fade 2.5s linear 0s var(--glitch-iterations, 1);
          }

          @keyframes typing {
               from {
                    width: 0
               }

               to {
                    width: 100%
               }
          }

          @keyframes blink-caret {

               from,
               to {
                    border-color: transparent
               }

               50% {
                    border-color: #4f46e5;
               }
          }

          /* Keyframes for the glitching question mark */
          @keyframes glitch-and-fade {

               /* Appear and hold */
               0% {
                    content: '';
               }

               10% {
                    content: '?';
                    transform: none;
                    color: #e0e0e0;
               }

               50% {
                    content: '?';
                    transform: none;
                    color: #e0e0e0;
               }

               /* Glitch sequence during erase */
               51% {
                    content: '‚ñì';
                    transform: translate(-8px, 2px) skewX(-30deg);
                    color: #db2777;
               }

               53% {
                    content: '?';
                    transform: translate(4px, -2px) skewX(20deg);
                    color: #e0e0e0;
               }

               55% {
                    content: '‚ñí';
                    transform: translate(6px, 3px) skewX(10deg);
                    color: #4f46e5;
               }

               57% {
                    content: '?';
                    transform: translate(-1px, -4px) skewX(-15deg);
                    color: #e0e0e0;
               }

               /* Disappear and pause */
               60% {
                    content: '';
               }

               100% {
                    content: '';
               }
          }

          /* Simple spinner for loading state */
          .spinner {
               border: 4px solid rgba(255, 255, 255, 0.2);
               border-left-color: #4f46e5;
               border-radius: 50%;
               width: 24px;
               height: 24px;
               animation: spin 1s linear infinite;
          }

          @keyframes spin {
               to {
                    transform: rotate(360deg);
               }
          }

          /* Modal styles */
          .modal-overlay {
               position: fixed;
               top: 0;
               left: 0;
               width: 100%;
               height: 100%;
               background: rgba(0, 0, 0, 0.8);
               backdrop-filter: blur(8px);
               z-index: 1000;
               display: flex;
               align-items: center;
               justify-content: center;
               opacity: 0;
               visibility: hidden;
               transition: all 0.3s ease;
          }

          .modal-overlay.active {
               opacity: 1;
               visibility: visible;
          }

          .modal-content {
               background: rgba(20, 20, 30, 0.95);
               border: 1px solid rgba(255, 255, 255, 0.1);
               border-radius: 24px;
               padding: 32px;
               max-width: 500px;
               width: 90%;
               max-height: 90vh;
               overflow-y: auto;
               transform: scale(0.9) translateY(20px);
               transition: transform 0.3s ease;
          }

          .modal-overlay.active .modal-content {
               transform: scale(1) translateY(0);
          }

          /* Toggle switch */
          .toggle-switch {
               position: relative;
               width: 48px;
               height: 24px;
               background: rgba(255, 255, 255, 0.1);
               border-radius: 12px;
               cursor: pointer;
               transition: background 0.3s;
          }

          .toggle-switch.active {
               background: linear-gradient(90deg, #4f46e5, #db2777);
          }

          .toggle-switch::after {
               content: '';
               position: absolute;
               top: 2px;
               left: 2px;
               width: 20px;
               height: 20px;
               background: white;
               border-radius: 50%;
               transition: transform 0.3s;
          }

          .toggle-switch.active::after {
               transform: translateX(24px);
          }

          /* File drop zone */
          .drop-zone {
               border: 2px dashed rgba(255, 255, 255, 0.2);
               border-radius: 16px;
               padding: 24px;
               text-align: center;
               transition: all 0.3s;
               cursor: pointer;
          }

          .drop-zone:hover,
          .drop-zone.drag-over {
               border-color: #db2777;
               background: rgba(219, 39, 119, 0.1);
          }

          .drop-zone.has-file {
               border-color: #10b981;
               background: rgba(16, 185, 129, 0.1);
          }

          /* Tab buttons */
          .tab-btn {
               padding: 8px 16px;
               border-radius: 8px;
               background: transparent;
               color: #9ca3af;
               border: 1px solid transparent;
               cursor: pointer;
               transition: all 0.3s;
          }

          .tab-btn.active {
               background: rgba(79, 70, 229, 0.2);
               color: #818cf8;
               border-color: rgba(79, 70, 229, 0.3);
          }

          .tab-btn:hover:not(.active) {
               background: rgba(255, 255, 255, 0.05);
          }

          /* Success animation */
          @keyframes successPulse {
               0% {
                    transform: scale(1);
               }

               50% {
                    transform: scale(1.1);
               }

               100% {
                    transform: scale(1);
               }
          }

          .success-icon {
               animation: successPulse 0.5s ease;
          }
     </style>
</head>

<body class="antialiased">

     <!-- 3D Background Canvas -->
     <canvas id="bg-canvas"></canvas>

     <div class="relative min-h-screen flex flex-col items-center justify-center p-4 overflow-hidden">
          <!-- Hero Section -->
          <header class="text-center z-10">
               <div class="typewriter">
                    <h1 class="text-4xl md:text-6xl lg:text-7xl font-black tracking-tighter mb-4">whynotusethis.website
                    </h1>
               </div>
               <p class="text-lg md:text-xl text-gray-400 max-w-2xl mx-auto">
                    –ö–æ–ª–ª–µ–∫—Ü–∏—è —Ü–∏—Ñ—Ä–æ–≤—ã—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –∏ –∏–¥–µ–π, –≤–æ–ø–ª–æ—â–µ–Ω–Ω—ã—Ö –≤ –∫–æ–¥–µ.
               </p>
          </header>
          <div class="absolute bottom-8 text-gray-500 text-sm animate-pulse z-10">
               –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑
          </div>
     </div>

     <main class="container mx-auto px-6 py-20 md:py-32 space-y-24 md:space-y-32 z-10 relative">

          <!-- About Section -->
          <section class="reveal max-w-4xl mx-auto text-center">
               <h2 class="text-3xl md:text-4xl font-bold mb-6">–û –ü—Ä–æ–µ–∫—Ç–µ</h2>
               <div class="glass-effect rounded-2xl p-8">
                    <p class="text-lg text-gray-300 leading-relaxed">
                         –≠—Ç–æ—Ç —Å–∞–π—Ç ‚Äî –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ. –≠—Ç–æ –∏–≥—Ä–æ–≤–∞—è –ø–ª–æ—â–∞–¥–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–º–µ–ª—ã—Ö –∏–¥–µ–π, –≥–¥–µ
                         —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è —Å –∏—Å–∫—É—Å—Å—Ç–≤–æ–º. –ö–∞–∂–¥–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∏–∂–µ ‚Äî —ç—Ç–æ –¥–≤–µ—Ä—å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–∏—Ä, —Å–æ–∑–¥–∞–Ω–Ω—ã–π
                         —Å —Ü–µ–ª—å—é –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –≥—Ä–∞–Ω–∏—Ü—ã –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ –≤ –≤–µ–±–µ. –ü–æ—á–µ–º—É –±—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ?
                    </p>
               </div>
          </section>

          <!-- Projects Section -->
          <section class="reveal">
               <h2 class="text-3xl md:text-4xl font-bold text-center mb-12">–ü—Ä–æ–µ–∫—Ç—ã</h2>
               <div id="projects-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

                    <!-- Project Card 1 -->
                    <a href="#" class="project-card block glass-effect rounded-2xl overflow-hidden group">
                         <div class="p-6">
                              <h3 class="text-2xl font-bold mb-2 gradient-text">–ü—Ä–æ–µ–∫—Ç "–û—Ä–∏–æ–Ω"</h3>
                              <p class="text-gray-400">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –≥–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤
                                   —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.</p>
                         </div>
                    </a>

                    <!-- Project Card 2 -->
                    <a href="#" class="project-card block glass-effect rounded-2xl overflow-hidden group">
                         <div class="p-6">
                              <h3 class="text-2xl font-bold mb-2 gradient-text">–ü—Ä–æ–µ–∫—Ç "–ù–æ–≤–∞"</h3>
                              <p class="text-gray-400">–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–≤–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞, —Å–æ–∑–¥–∞—é—â–∏–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ
                                   –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–∑—ã.</p>
                         </div>
                    </a>

                    <!-- Project Card 3 -->
                    <a href="#" class="project-card block glass-effect rounded-2xl overflow-hidden group">
                         <div class="p-6">
                              <h3 class="text-2xl font-bold mb-2 gradient-text">–ü—Ä–æ–µ–∫—Ç "–õ–µ–±–µ–¥—å"</h3>
                              <p class="text-gray-400">–î–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–π.
                              </p>
                         </div>
                    </a>

                    <!-- Project Card 4 -->
                    <a href="#" class="project-card block glass-effect rounded-2xl overflow-hidden group">
                         <div class="p-6">
                              <h3 class="text-2xl font-bold mb-2 gradient-text">–ü—Ä–æ–µ–∫—Ç "–í–µ–≥–∞"</h3>
                              <p class="text-gray-400">–ë—Ä–∞—É–∑–µ—Ä–Ω–∞—è –∏–≥—Ä–∞ –≤ —Å—Ç–∏–ª–µ —Ä–µ—Ç—Ä–æ-–∞—Ä–∫–∞–¥ —Å –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π
                                   —É—Ä–æ–≤–Ω–µ–π.</p>
                         </div>
                    </a>

                    <!-- Project Card 5 -->
                    <a href="#" class="project-card block glass-effect rounded-2xl overflow-hidden group">
                         <div class="p-6">
                              <h3 class="text-2xl font-bold mb-2 gradient-text">–ü—Ä–æ–µ–∫—Ç "–ö–≤–∞–∑–∞—Ä"</h3>
                              <p class="text-gray-400">–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π —Å–µ–∫–≤–µ–Ω—Å–æ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è.
                              </p>
                         </div>
                    </a>

                    <!-- Gemini-powered Idea Generator Card -->
                    <div id="generate-idea-card"
                         class="project-card flex items-center justify-center glass-effect rounded-2xl border-2 border-dashed border-gray-700 cursor-pointer hover:border-indigo-400 hover:bg-gray-900/50">
                         <div id="generate-idea-content" class="text-center p-6">
                              <p class="text-2xl font-bold mb-2">‚ú®</p>
                              <p class="text-gray-400 font-semibold">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–¥–µ—é</p>
                         </div>
                         <div id="generate-idea-loader" class="hidden">
                              <div class="spinner"></div>
                         </div>
                    </div>

                    <!-- Self-Destructing Content Card -->
                    <div id="create-content-card"
                         class="project-card flex items-center justify-center glass-effect rounded-2xl border-2 border-dashed border-pink-700 cursor-pointer hover:border-pink-400 hover:bg-gray-900/50">
                         <div class="text-center p-6">
                              <p class="text-2xl font-bold mb-2">üî•</p>
                              <p class="text-gray-400 font-semibold">–í—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç</p>
                              <p class="text-sm text-gray-500 mt-1">–¢–µ–∫—Å—Ç, —Å—Å—ã–ª–∫–∞ –∏–ª–∏ —Ñ–∞–π–ª —Å –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ–º</p>
                         </div>
                    </div>


               </div>
          </section>

          <!-- Personal Events Section -->
          <section class="reveal">
               <h2 class="text-3xl md:text-4xl font-bold text-center mb-12">–õ–∏—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è</h2>
               <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

                    <!-- Event Card 1 -->
                    <a href="https://username960528.github.io/oka-bicycle/" target="_blank" rel="noopener noreferrer"
                         class="project-card block glass-effect rounded-2xl overflow-hidden group">
                         <div class="p-6">
                              <h3 class="text-2xl font-bold mb-2 gradient-text">–ü–æ–∫–∞—Ç—É—à–∫–∏ –ø–æ –û–∫–µ</h3>
                              <p class="text-gray-400">–û—Ç—á–µ—Ç –æ –≤–µ–ª–æ–ø–æ–µ–∑–¥–∫–µ –≤–¥–æ–ª—å —Ä–µ–∫–∏ –û–∫–∞. –ú–∞—Ä—à—Ä—É—Ç, —Ñ–æ—Ç–æ –∏ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è.
                              </p>
                         </div>
                    </a>

                    <!-- Add more event cards here -->
                    <div
                         class="project-card flex items-center justify-center glass-effect rounded-2xl border-2 border-dashed border-gray-700">
                         <p class="text-gray-500">–°–∫–æ—Ä–æ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –Ω–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ...</p>
                    </div>

               </div>
          </section>

          <!-- Contact Section -->
          <section class="reveal max-w-4xl mx-auto text-center">
               <h2 class="text-3xl md:text-4xl font-bold mb-6">–°–≤—è–∑–∞—Ç—å—Å—è</h2>
               <div class="glass-effect rounded-2xl p-8 flex items-center justify-center space-x-6">
                    <a href="#" class="text-gray-400 hover:text-indigo-400 transition-colors" title="GitHub">
                         <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                              <path fill-rule="evenodd"
                                   d="M12 2C6.477 2 2 6.477 2 12c0 4.418 2.865 8.168 6.839 9.49.5.092.682-.217.682-.482 0-.237-.009-.868-.014-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.031-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.378.203 2.398.1 2.65.64.7 1.028 1.595 1.028 2.688 0 3.848-2.338 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.001 10.001 0 0022 12c0-5.523-4.477-10-10-10z"
                                   clip-rule="evenodd" />
                         </svg>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-indigo-400 transition-colors" title="Telegram">
                         <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                              <path
                                   d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.17.9-.494 1.2-.822 1.23-.696.065-1.225-.46-1.9-1.088-1.053-.968-1.653-1.555-2.67-2.52-.843-.797-.293-1.23.166-1.932.118-.174 2.22-2.033 2.22-2.033s.347-.333-.102-.034c-.482.32-1.683 1.123-2.374 1.595-.69.472-1.264.686-1.69.542-.49-.163-1.422-.493-2.123-.746-1.044-.377-1.88-.566-1.718-1.161.133-.474.916-2.17 1.37-3.648.59-1.93.978-2.51.13-2.615-.847-.104-1.83.655-1.83.655s-.682-.45.234-.733c.85-.26 1.917-.64 2.58-.83.662-.19 1.24-.21 1.555-.21.32-.002.633.014.882.094.26.084.394.2.438.246.043.046.063.1.058.155-.007.073-.015.15-.024.225-.05.468-.283 1.58-.482 2.54-.15.717-.3 1.545-.3 1.545s-.012.423.37.492c.383.07.87-.273.87-.273s2.06-1.86 2.532-2.325c.472-.467.783-.77.962-.77z">
                              </path>
                         </svg>
                    </a>
                    <a href="mailto:example@whynotusethis.website"
                         class="text-gray-400 hover:text-indigo-400 transition-colors" title="Email">
                         <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                              xmlns="http://www.w3.org/2000/svg">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                   d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z">
                              </path>
                         </svg>
                    </a>
               </div>
          </section>

     </main>

     <footer class="text-center py-8 text-gray-600 text-sm">
          <p>&copy; 2024 whynotusethis.website. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
     </footer>

     <!-- Self-Destructing Content Modal -->
     <div id="content-modal" class="modal-overlay">
          <div class="modal-content">
               <!-- Modal Header -->
               <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold gradient-text">üî• –°–æ–∑–¥–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç</h2>
                    <button id="close-modal-btn" class="text-gray-400 hover:text-white transition-colors">
                         <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                   d="M6 18L18 6M6 6l12 12" />
                         </svg>
                    </button>
               </div>

               <!-- Form states -->
               <div id="modal-form-state">
                    <!-- Content Type Tabs -->
                    <div class="flex gap-2 mb-6">
                         <button class="tab-btn active" data-type="text">üìù –¢–µ–∫—Å—Ç</button>
                         <button class="tab-btn" data-type="link">üîó –°—Å—ã–ª–∫–∞</button>
                         <button class="tab-btn" data-type="file">üìÅ –§–∞–π–ª</button>
                    </div>

                    <!-- Text/Link Input -->
                    <div id="text-input-section" class="mb-6">
                         <label class="block text-sm text-gray-400 mb-2">–í–∞—à –∫–æ–Ω—Ç–µ–Ω—Ç</label>
                         <textarea id="content-input" rows="4"
                              class="w-full bg-gray-800/50 border border-gray-700 rounded-xl p-4 text-white placeholder-gray-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none transition-colors resize-none"
                              placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –∏–ª–∏ —Å—Å—ã–ª–∫—É..."></textarea>
                    </div>

                    <!-- File Upload Zone -->
                    <div id="file-input-section" class="mb-6 hidden">
                         <label class="block text-sm text-gray-400 mb-2">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</label>
                         <div id="drop-zone" class="drop-zone">
                              <input type="file" id="file-input" accept="image/*" class="hidden">
                              <div id="drop-zone-content">
                                   <svg class="w-12 h-12 mx-auto text-gray-500 mb-3" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                             d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                                   </svg>
                                   <p class="text-gray-400">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª —Å—é–¥–∞ –∏–ª–∏ <span
                                             class="text-indigo-400">–≤—ã–±–µ—Ä–∏—Ç–µ</span></p>
                                   <p class="text-sm text-gray-500 mt-1">PNG, JPG, GIF, WEBP –¥–æ 10MB</p>
                              </div>
                              <div id="drop-zone-file" class="hidden">
                                   <div class="flex items-center justify-center gap-3">
                                        <svg class="w-8 h-8 text-green-500" fill="none" stroke="currentColor"
                                             viewBox="0 0 24 24">
                                             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                  d="M5 13l4 4L19 7" />
                                        </svg>
                                        <span id="selected-file-name" class="text-gray-300"></span>
                                   </div>
                                   <button id="remove-file-btn"
                                        class="text-sm text-red-400 hover:text-red-300 mt-2">–£–¥–∞–ª–∏—Ç—å</button>
                              </div>
                         </div>
                    </div>

                    <!-- Auto-delete Toggle -->
                    <div class="mb-6 p-4 bg-gray-800/30 rounded-xl">
                         <div class="flex items-center justify-between">
                              <div>
                                   <p class="text-white font-medium">–ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</p>
                                   <p class="text-sm text-gray-500">–ö–æ–Ω—Ç–µ–Ω—Ç –∏—Å—á–µ–∑–Ω–µ—Ç —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è</p>
                              </div>
                              <div id="auto-delete-toggle" class="toggle-switch active"></div>
                         </div>

                         <!-- Timer Selection -->
                         <div id="timer-options" class="mt-4 grid grid-cols-5 gap-2">
                              <button class="timer-btn tab-btn active" data-minutes="1">1 –º–∏–Ω</button>
                              <button class="timer-btn tab-btn" data-minutes="5">5 –º–∏–Ω</button>
                              <button class="timer-btn tab-btn" data-minutes="15">15 –º–∏–Ω</button>
                              <button class="timer-btn tab-btn" data-minutes="60">1 —á–∞—Å</button>
                              <button class="timer-btn tab-btn" data-minutes="1440">24 —á–∞—Å–∞</button>
                         </div>
                    </div>

                    <!-- Security Options -->
                    <div class="mb-6 space-y-3">
                         <!-- Burn After Read -->
                         <div class="p-4 bg-red-900/20 border border-red-800/30 rounded-xl">
                              <div class="flex items-center justify-between">
                                   <div>
                                        <p class="text-white font-medium">üî• –£–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ –ø—Ä–æ—á—Ç–µ–Ω–∏—è</p>
                                        <p class="text-sm text-gray-500">–ö–æ–Ω—Ç–µ–Ω—Ç –∏—Å—á–µ–∑–Ω–µ—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</p>
                                   </div>
                                   <div id="burn-after-read-toggle" class="toggle-switch"></div>
                              </div>
                         </div>

                         <!-- IP Restriction -->
                         <div class="p-4 bg-yellow-900/20 border border-yellow-800/30 rounded-xl">
                              <div class="flex items-center justify-between">
                                   <div>
                                        <p class="text-white font-medium">üîí –û–¥–∏–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä —Å IP</p>
                                        <p class="text-sm text-gray-500">–ö–∞–∂–¥—ã–π IP –º–æ–∂–µ—Ç –æ—Ç–∫—Ä—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑</p>
                                   </div>
                                   <div id="ip-restriction-toggle" class="toggle-switch"></div>
                              </div>
                         </div>
                    </div>

                    <!-- Submit Button -->
                    <button id="create-content-btn"
                         class="w-full py-4 bg-gradient-to-r from-indigo-600 to-pink-600 hover:from-indigo-500 hover:to-pink-500 rounded-xl font-bold text-white transition-all transform hover:scale-[1.02]">
                         –°–æ–∑–¥–∞—Ç—å –∏ –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É
                    </button>
               </div>

               <!-- Success state -->
               <div id="modal-success-state" class="hidden text-center py-8">
                    <div class="success-icon text-6xl mb-4">‚úÖ</div>
                    <h3 class="text-xl font-bold text-white mb-2">–ö–æ–Ω—Ç–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω!</h3>
                    <p class="text-gray-400 mb-6">–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –µ—ë –ø–æ–ª—É—á–∞—Ç–µ–ª—é</p>

                    <div class="flex items-center gap-2 mb-6">
                         <input id="result-url" type="text" readonly
                              class="flex-1 bg-gray-800/50 border border-gray-700 rounded-xl p-4 text-indigo-400 text-sm">
                         <button id="copy-url-btn"
                              class="px-6 py-4 bg-indigo-600 hover:bg-indigo-500 rounded-xl font-semibold transition-colors">
                              üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
                         </button>
                    </div>

                    <p id="copy-feedback" class="text-green-400 text-sm mb-6 hidden">–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!</p>

                    <button id="create-another-btn" class="text-indigo-400 hover:text-indigo-300 transition-colors">
                         ‚Üê –°–æ–∑–¥–∞—Ç—å –µ—â—ë
                    </button>
               </div>

               <!-- Loading state -->
               <div id="modal-loading-state" class="hidden text-center py-12">
                    <div class="spinner mx-auto mb-4" style="width: 48px; height: 48px; border-width: 4px;"></div>
                    <p class="text-gray-400">–°–æ–∑–¥–∞—ë–º –∫–æ–Ω—Ç–µ–Ω—Ç...</p>
               </div>

               <!-- Error state -->
               <div id="modal-error-state" class="hidden text-center py-8">
                    <div class="text-6xl mb-4">‚ùå</div>
                    <h3 class="text-xl font-bold text-red-400 mb-2">–û—à–∏–±–∫–∞</h3>
                    <p id="error-message" class="text-gray-400 mb-6"></p>
                    <button id="retry-btn" class="text-indigo-400 hover:text-indigo-300 transition-colors">
                         ‚Üê –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
                    </button>
               </div>
          </div>
     </div>

     <script>
          // --- 3D Scene Setup ---
          let scene, camera, renderer, shape, composer, glitchPass, starfield;

          function init3D() {
               const canvas = document.getElementById('bg-canvas');
               scene = new THREE.Scene();

               // Camera setup
               camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
               camera.position.z = 5;

               // Renderer setup
               renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true });
               renderer.setSize(window.innerWidth, window.innerHeight);
               renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

               // Create the starfield
               createStarfield();

               // Create a geometric shape (Icosahedron)
               const geometry = new THREE.IcosahedronGeometry(1.5, 0);
               const material = new THREE.MeshStandardMaterial({
                    color: 0x4f46e5,
                    emissive: 0xdb2777,
                    roughness: 0.3,
                    metalness: 0.6,
                    wireframe: true,
               });
               shape = new THREE.Mesh(geometry, material);
               scene.add(shape);

               // Lighting
               const ambientLight = new THREE.AmbientLight(0xffffff, 0.1);
               scene.add(ambientLight);
               const pointLight = new THREE.PointLight(0xffffff, 1);
               pointLight.position.set(5, 5, 5);
               scene.add(pointLight);

               // Post-processing setup
               composer = new THREE.EffectComposer(renderer);
               composer.addPass(new THREE.RenderPass(scene, camera));

               glitchPass = new THREE.GlitchPass();
               glitchPass.enabled = false; // Start disabled
               composer.addPass(glitchPass);


               // Handle window resizing
               window.addEventListener('resize', onWindowResize, false);
               // Handle mouse movement
               document.addEventListener('mousemove', onMouseMove, false);

               animate();
          }

          // Function to create the starfield
          function createStarfield() {
               const starCount = 10000;
               const positions = [];
               const geometry = new THREE.BufferGeometry();

               for (let i = 0; i < starCount; i++) {
                    const x = (Math.random() - 0.5) * 2000;
                    const y = (Math.random() - 0.5) * 2000;
                    const z = (Math.random() - 0.5) * 2000;
                    positions.push(x, y, z);
               }

               geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));

               // Create a circular texture programmatically to avoid square stars
               const canvas = document.createElement('canvas');
               canvas.width = 64;
               canvas.height = 64;
               const context = canvas.getContext('2d');
               const gradient = context.createRadialGradient(
                    canvas.width / 2, canvas.height / 2, 0,
                    canvas.width / 2, canvas.height / 2, canvas.width / 2
               );
               gradient.addColorStop(0, 'rgba(255,255,255,1)');
               gradient.addColorStop(0.2, 'rgba(255,255,255,0.8)');
               gradient.addColorStop(1, 'rgba(255,255,255,0)');
               context.fillStyle = gradient;
               context.fillRect(0, 0, canvas.width, canvas.height);
               const starTexture = new THREE.CanvasTexture(canvas);


               const material = new THREE.PointsMaterial({
                    map: starTexture,
                    size: 1.5,
                    sizeAttenuation: true,
                    transparent: true,
                    alphaTest: 0.1 // Adjust for softer edges
               });

               starfield = new THREE.Points(geometry, material);
               scene.add(starfield);
          }

          // --- Animation Loop ---
          const clock = new THREE.Clock();
          function animate() {
               const elapsedTime = clock.getElapsedTime();

               // Animate the shape
               shape.rotation.y = .2 * elapsedTime;
               shape.rotation.x = .2 * elapsedTime;

               // Animate the starfield for a parallax effect
               if (starfield) {
                    starfield.rotation.y = -0.02 * elapsedTime;
               }

               // Use composer to render the scene with effects
               composer.render();
               requestAnimationFrame(animate);
          }

          // --- Event Handlers ---
          function onWindowResize() {
               camera.aspect = window.innerWidth / window.innerHeight;
               camera.updateProjectionMatrix();
               renderer.setSize(window.innerWidth, window.innerHeight);
               composer.setSize(window.innerWidth, window.innerHeight);
          }

          function onMouseMove(event) {
               // Move the shape subtly based on mouse position
               const mouseX = (event.clientX / window.innerWidth) * 2 - 1;
               const mouseY = -(event.clientY / window.innerHeight) * 2 + 1;

               gsap.to(shape.rotation, {
                    duration: 1,
                    x: mouseY * 0.5 + shape.rotation.x * 0.1,
                    y: mouseX * 0.5 + shape.rotation.y * 0.1,
                    ease: 'power2.out'
               });
          }

          // --- Scroll Reveal Animation ---
          function setupScrollReveal() {
               const revealElements = document.querySelectorAll('.reveal');

               const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                         if (entry.isIntersecting) {
                              entry.target.classList.add('visible');
                         }
                    });
               }, {
                    threshold: 0.1
               });

               revealElements.forEach(el => {
                    observer.observe(el);
               });
          }

          // --- Glitch Synchronization Logic ---
          function trigger3DGlitch(isWild) {
               const canvas = document.getElementById('bg-canvas');
               if (glitchPass && canvas) {
                    canvas.style.opacity = '0.9';
                    glitchPass.enabled = true;
                    glitchPass.goWild = isWild;

                    setTimeout(() => {
                         glitchPass.enabled = false;
                         canvas.style.opacity = '0.6';
                    }, 400);
               }
          }

          function runGlitchSequence(iterations) {
               const typewriterDiv = document.querySelector('.typewriter');
               if (!typewriterDiv || typewriterDiv.classList.contains('glitch-active')) {
                    return;
               }

               typewriterDiv.style.setProperty('--glitch-iterations', iterations);
               typewriterDiv.classList.add('glitch-active');

               if (iterations === 1) {
                    setTimeout(() => trigger3DGlitch(Math.random() < 0.5), 1275);
               } else {
                    setTimeout(() => trigger3DGlitch(true), 1275);
                    setTimeout(() => trigger3DGlitch(false), 1275 + 2500);
               }

               const animationDuration = 2500 * iterations;
               setTimeout(() => {
                    typewriterDiv.classList.remove('glitch-active');
               }, animationDuration + 100);
          }

          function scheduleSubsequentRandomGlitches() {
               const minDelay = 30000; // 30 seconds
               const maxDelay = 120000; // 2 minutes
               const randomDelay = Math.random() * (maxDelay - minDelay) + minDelay;

               setTimeout(() => {
                    runGlitchSequence(2);
                    scheduleSubsequentRandomGlitches();
               }, randomDelay);
          }


          // --- Gemini API Project Idea Generator ---
          async function generateProjectIdea() {
               const generateCard = document.getElementById('generate-idea-card');
               const content = document.getElementById('generate-idea-content');
               const loader = document.getElementById('generate-idea-loader');

               content.classList.add('hidden');
               loader.classList.remove('hidden');
               generateCard.style.cursor = 'wait';

               const prompt = `Generate a single, creative, and futuristic project idea for a web developer's portfolio. The idea should be concise and inspiring. Respond with a single JSON object with two keys: "name" (a cool, short project name) and "description" (a one-sentence description of the project). Example: {"name": "Project Chronos", "description": "An interactive timeline visualizing the evolution of web technologies."}`;

               const payload = {
                    contents: [{
                         parts: [{
                              text: prompt
                         }]
                    }],
                    generationConfig: {
                         responseMimeType: "application/json",
                         responseSchema: {
                              type: "OBJECT",
                              properties: {
                                   "name": { "type": "STRING" },
                                   "description": { "type": "STRING" }
                              },
                              required: ["name", "description"]
                         }
                    }
               };

               const apiKey = "";
               const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

               try {
                    const response = await fetch(apiUrl, {
                         method: 'POST',
                         headers: { 'Content-Type': 'application/json' },
                         body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                         throw new Error(`API call failed with status: ${response.status}`);
                    }

                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0) {
                         const idea = result.candidates[0].content.parts[0].text;
                         const parsedIdea = JSON.parse(idea);
                         addNewProjectCard(parsedIdea.name, parsedIdea.description);
                    } else {
                         console.error('No ideas generated from API.');
                         addNewProjectCard('–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏', '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∏–¥–µ—é –æ—Ç API. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.');
                    }

               } catch (error) {
                    console.error('Error calling Gemini API:', error);
                    addNewProjectCard('–°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞', '–ù–µ —É–¥–∞–ª–æ—Å—å —Å–≤—è–∑–∞—Ç—å—Å—è —Å API. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å.');
               } finally {
                    content.classList.remove('hidden');
                    loader.classList.add('hidden');
                    generateCard.style.cursor = 'pointer';
               }
          }

          function addNewProjectCard(name, description) {
               const projectsGrid = document.getElementById('projects-grid');
               const generatorCard = document.getElementById('generate-idea-card');

               const newCard = document.createElement('a');
               newCard.href = '#';
               newCard.className = 'project-card block glass-effect rounded-2xl overflow-hidden group';

               newCard.innerHTML = `
                <div class="p-6">
                    <h3 class="text-2xl font-bold mb-2 gradient-text">${name}</h3>
                    <p class="text-gray-400">${description}</p>
                </div>
            `;

               projectsGrid.insertBefore(newCard, generatorCard);
          }

          // --- Initial Setup ---
          document.addEventListener('DOMContentLoaded', () => {
               const generateCard = document.getElementById('generate-idea-card');
               if (generateCard) {
                    generateCard.addEventListener('click', generateProjectIdea);
               }

               // --- Self-Destructing Content Modal Setup ---
               setupContentModal();

               // Wait for the typing animation to finish
               setTimeout(() => {
                    // Run the first SINGLE glitch sequence immediately.
                    runGlitchSequence(1);

                    // Schedule the FIRST RANDOM (double) glitch with a shorter delay.
                    const firstRandomMin = 15000; // 15 seconds
                    const firstRandomMax = 60000; // 1 minute
                    const firstRandomDelay = Math.random() * (firstRandomMax - firstRandomMin) + firstRandomMin;

                    setTimeout(() => {
                         runGlitchSequence(2); // Run the first random double glitch

                         // Now, start the regular loop for all subsequent random glitches.
                         scheduleSubsequentRandomGlitches();
                    }, firstRandomDelay);

               }, 3500); // Corresponds to the 'typing' animation duration
          });

          // --- GSAP for smooth animations (optional, but recommended) ---
          const gsapScript = document.createElement('script');
          gsapScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js';
          gsapScript.onload = () => {
               init3D();
               setupScrollReveal();
          };
          document.head.appendChild(gsapScript);

          // --- Self-Destructing Content Modal Logic ---
          function setupContentModal() {
               const API_BASE = '/api';

               // Elements
               const modal = document.getElementById('content-modal');
               const openBtn = document.getElementById('create-content-card');
               const closeBtn = document.getElementById('close-modal-btn');
               const typeTabs = document.querySelectorAll('.tab-btn[data-type]');
               const timerBtns = document.querySelectorAll('.timer-btn');
               const autoDeleteToggle = document.getElementById('auto-delete-toggle');
               const timerOptions = document.getElementById('timer-options');
               const textInputSection = document.getElementById('text-input-section');
               const fileInputSection = document.getElementById('file-input-section');
               const contentInput = document.getElementById('content-input');
               const fileInput = document.getElementById('file-input');
               const dropZone = document.getElementById('drop-zone');
               const dropZoneContent = document.getElementById('drop-zone-content');
               const dropZoneFile = document.getElementById('drop-zone-file');
               const selectedFileName = document.getElementById('selected-file-name');
               const removeFileBtn = document.getElementById('remove-file-btn');
               const createBtn = document.getElementById('create-content-btn');
               const resultUrl = document.getElementById('result-url');
               const copyUrlBtn = document.getElementById('copy-url-btn');
               const copyFeedback = document.getElementById('copy-feedback');
               const createAnotherBtn = document.getElementById('create-another-btn');
               const retryBtn = document.getElementById('retry-btn');
               const errorMessage = document.getElementById('error-message');
               const burnAfterReadToggle = document.getElementById('burn-after-read-toggle');
               const ipRestrictionToggle = document.getElementById('ip-restriction-toggle');

               // State
               let currentType = 'text';
               let currentTimer = 1;
               let autoDelete = true;
               let burnAfterRead = false;
               let ipRestriction = false;
               let selectedFile = null;

               // Modal open/close
               openBtn.addEventListener('click', () => {
                    modal.classList.add('active');
                    document.body.style.overflow = 'hidden';
               });

               function closeModal() {
                    modal.classList.remove('active');
                    document.body.style.overflow = '';
                    resetForm();
               }

               closeBtn.addEventListener('click', closeModal);
               modal.addEventListener('click', (e) => {
                    if (e.target === modal) closeModal();
               });

               document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && modal.classList.contains('active')) {
                         closeModal();
                    }
               });

               // Type tabs
               typeTabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                         typeTabs.forEach(t => t.classList.remove('active'));
                         tab.classList.add('active');
                         currentType = tab.dataset.type;

                         if (currentType === 'file') {
                              textInputSection.classList.add('hidden');
                              fileInputSection.classList.remove('hidden');
                         } else {
                              textInputSection.classList.remove('hidden');
                              fileInputSection.classList.add('hidden');
                              contentInput.placeholder = currentType === 'link'
                                   ? 'https://example.com'
                                   : '–í–≤–µ–¥–∏—Ç–µ –≤–∞—à —Ç–µ–∫—Å—Ç...';
                         }
                    });
               });

               // Timer buttons
               timerBtns.forEach(btn => {
                    btn.addEventListener('click', () => {
                         timerBtns.forEach(b => b.classList.remove('active'));
                         btn.classList.add('active');
                         currentTimer = parseInt(btn.dataset.minutes);
                    });
               });

               // Auto-delete toggle
               autoDeleteToggle.addEventListener('click', () => {
                    autoDelete = !autoDelete;
                    autoDeleteToggle.classList.toggle('active', autoDelete);
                    timerOptions.style.display = autoDelete ? 'grid' : 'none';
               });

               // Burn after read toggle
               burnAfterReadToggle.addEventListener('click', () => {
                    burnAfterRead = !burnAfterRead;
                    burnAfterReadToggle.classList.toggle('active', burnAfterRead);
               });

               // IP restriction toggle
               ipRestrictionToggle.addEventListener('click', () => {
                    ipRestriction = !ipRestriction;
                    ipRestrictionToggle.classList.toggle('active', ipRestriction);
               });

               // File drag & drop
               dropZone.addEventListener('click', () => fileInput.click());

               dropZone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    dropZone.classList.add('drag-over');
               });

               dropZone.addEventListener('dragleave', () => {
                    dropZone.classList.remove('drag-over');
               });

               dropZone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    dropZone.classList.remove('drag-over');
                    const files = e.dataTransfer.files;
                    if (files.length > 0) {
                         handleFile(files[0]);
                    }
               });

               fileInput.addEventListener('change', () => {
                    if (fileInput.files.length > 0) {
                         handleFile(fileInput.files[0]);
                    }
               });

               function handleFile(file) {
                    const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];
                    if (!allowedTypes.includes(file.type)) {
                         alert('–†–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: PNG, JPG, GIF, WEBP');
                         return;
                    }
                    if (file.size > 10 * 1024 * 1024) {
                         alert('–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π. –ú–∞–∫—Å–∏–º—É–º 10MB.');
                         return;
                    }

                    selectedFile = file;
                    selectedFileName.textContent = file.name;
                    dropZoneContent.classList.add('hidden');
                    dropZoneFile.classList.remove('hidden');
                    dropZone.classList.add('has-file');
               }

               removeFileBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    clearFile();
               });

               function clearFile() {
                    selectedFile = null;
                    fileInput.value = '';
                    dropZoneContent.classList.remove('hidden');
                    dropZoneFile.classList.add('hidden');
                    dropZone.classList.remove('has-file');
               }

               // Form states
               function showState(state) {
                    ['form', 'success', 'loading', 'error'].forEach(s => {
                         document.getElementById(`modal-${s}-state`).classList.toggle('hidden', s !== state);
                    });
               }

               function resetForm() {
                    showState('form');
                    contentInput.value = '';
                    clearFile();
                    typeTabs.forEach(t => t.classList.remove('active'));
                    typeTabs[0].classList.add('active');
                    currentType = 'text';
                    textInputSection.classList.remove('hidden');
                    fileInputSection.classList.add('hidden');
               }

               // Create content
               createBtn.addEventListener('click', async () => {
                    const content = contentInput.value.trim();

                    if (currentType !== 'file' && !content) {
                         alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ–Ω—Ç–µ–Ω—Ç');
                         return;
                    }

                    if (currentType === 'file' && !selectedFile) {
                         alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª');
                         return;
                    }

                    showState('loading');

                    try {
                         const formData = new FormData();
                         formData.append('type', currentType);
                         formData.append('content', content);
                         formData.append('autoDelete', autoDelete);
                         formData.append('deleteAfterMinutes', currentTimer);
                         formData.append('burnAfterRead', burnAfterRead);
                         formData.append('ipRestriction', ipRestriction);

                         if (selectedFile) {
                              formData.append('file', selectedFile);
                         }

                         const response = await fetch(`${API_BASE}/content`, {
                              method: 'POST',
                              body: formData
                         });

                         const data = await response.json();

                         if (!response.ok || !data.success) {
                              throw new Error(data.error || '–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞');
                         }

                         const fullUrl = `${window.location.origin}/view/${data.uuid}`;
                         resultUrl.value = fullUrl;
                         showState('success');

                    } catch (error) {
                         console.error('Error creating content:', error);
                         errorMessage.textContent = error.message;
                         showState('error');
                    }
               });

               // Copy URL
               copyUrlBtn.addEventListener('click', async () => {
                    try {
                         await navigator.clipboard.writeText(resultUrl.value);
                         copyFeedback.classList.remove('hidden');
                         setTimeout(() => {
                              copyFeedback.classList.add('hidden');
                         }, 2000);
                    } catch (err) {
                         // Fallback for older browsers
                         resultUrl.select();
                         document.execCommand('copy');
                         copyFeedback.classList.remove('hidden');
                    }
               });

               // Create another
               createAnotherBtn.addEventListener('click', () => {
                    resetForm();
               });

               // Retry on error
               retryBtn.addEventListener('click', () => {
                    showState('form');
               });
          }

     </script>
</body>

</html>