<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QA Knowledge Graph</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.160.0/three.min.js"></script>
    <script src="https://unpkg.com/3d-force-graph"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/millionaire.css">
    <link rel="stylesheet" href="css/learning-loop.css">
    <script>
        window.onerror = function (msg, url, line, col, error) {
            alert("Error: " + msg + "\nurl: " + url + "\nline: " + line);
        };
    </script>
</head>

<body>
    <aside class="sidebar">
        <h1>üß† QA Knowledge Graph</h1>

        <div class="input-group">
            <label>üîç –ü–æ–∏—Å–∫ —É–∑–ª–∞</label>
            <input type="text" id="searchInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —É–∑–ª–∞..." autocomplete="off">
        </div>

        <div class="stats-panel" id="statsPanel">
            üìä <span id="statsText">0 —É–∑–ª–æ–≤ ‚Ä¢ 0 —Å–≤—è–∑–µ–π</span>
        </div>

        <button id="viewModeBtn" style="background: #2a2a3a; border: 1px solid #667eea;">üîÑ
            –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ 3D</button>



        <div class="input-group">
            <label>üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫</label>
            <select id="techStack">
                <option value="python">Python (Selenium, pytest, requests)</option>
                <option value="java">Java (Selenium, JUnit, REST Assured)</option>
                <option value="javascript">JavaScript (Playwright, Jest, Cypress)</option>
                <option value="custom">–ö–∞—Å—Ç–æ–º–Ω—ã–π —Å—Ç–µ–∫...</option>
            </select>
        </div>

        <div class="input-group" id="customStackGroup" style="display: none;">
            <label>–£–∫–∞–∂–∏—Ç–µ —Å–≤–æ–π —Å—Ç–µ–∫</label>
            <input type="text" id="customStack" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Ruby, Capybara, RSpec">
        </div>

        <div class="input-group">
            <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è —É–∑–ª–∞</label>
            <select id="nodeCategory">
                <option value="Core">üîµ Core (–æ—Å–Ω–æ–≤—ã)</option>
                <option value="Tools">üü¢ Tools (–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã)</option>
                <option value="Patterns">üü° Patterns (–ø–∞—Ç—Ç–µ—Ä–Ω—ã)</option>
                <option value="Testing">üü£ Testing (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)</option>
                <option value="Integration">üü† Integration (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)</option>
            </select>
        </div>

        <div class="input-group">
            <label>–î–æ–±–∞–≤–∏—Ç—å —Ç–µ–º—É</label>
            <input type="text" id="topicInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Selenium WebDriver">
        </div>

        <div class="input-group">
            <label>–¢–∏–ø —Å–≤—è–∑–∏</label>
            <select id="edgeType">
                <option value="causal">üî¥ Causal (–ø—Ä–∏—á–∏–Ω–Ω–∞—è)</option>
                <option value="multiway">üîµ Multiway (–ø–µ—Ä–µ—Ö–æ–¥)</option>
                <option value="branchial">üü¢ Branchial (–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞)</option>
            </select>
        </div>

        <button id="addTopicAIBtn">‚ú® –î–æ–±–∞–≤–∏—Ç—å + –Ω–∞–π—Ç–∏ —Å–≤—è–∑–∏ (AI)</button>

        <div class="btn-row">
            <button class="secondary" id="addTopicManualBtn">+ –î–æ–±–∞–≤–∏—Ç—å</button>
            <button class="secondary" id="connectModeBtn">üîó –°–≤—è–∑–∞—Ç—å</button>
        </div>

        <div class="btn-row">
            <button class="secondary" id="exportBtn">üíæ Export</button>
            <button class="secondary" id="importBtn">üìÇ Import</button>
        </div>

        <div class="btn-row">
            <button class="danger" id="deleteBtn">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω–æ–µ</button>
            <button class="danger" id="clearBtn">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë</button>
        </div>

        <div class="legend">
            <h3>–¢–ò–ü–´ –°–í–Ø–ó–ï–ô</h3>
            <div class="legend-item">
                <div class="legend-line causal"></div>
                <span>Causal ‚Äî –ø—Ä–∏—á–∏–Ω–∞ ‚Üí —Å–ª–µ–¥—Å—Ç–≤–∏–µ</span>
            </div>
            <div class="legend-item">
                <div class="legend-line multiway"></div>
                <span>Multiway ‚Äî –ø–µ—Ä–µ—Ö–æ–¥—ã/–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã</span>
            </div>
            <div class="legend-item">
                <div class="legend-line branchial"></div>
                <span>Branchial ‚Äî –æ–±—â–∏–π –ø—Ä–µ–¥–æ–∫/–≥—Ä—É–ø–ø–∞</span>
            </div>
        </div>
        <button class="secondary" id="helpBtn" style="margin-top: 10px; width: 100%;">‚ÑπÔ∏è –°–ø—Ä–∞–≤–∫–∞ –æ
            —Ç–∏–ø–∞—Ö</button>

        <div class="node-info" id="nodeInfo">
            <h3 id="nodeTitle">‚Äî</h3>
            <p id="nodeDesc">–í—ã–±–µ—Ä–∏—Ç–µ —É–∑–µ–ª –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏</p>
            <button id="startQuizBtn" class="secondary" style="margin-top: 10px; width: 100%;">üéì –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç</button>
            <button id="autoLinkBtn" class="secondary" style="margin-top: 10px; width: 100%;">üîó –ù–∞–π—Ç–∏ —Å–≤—è–∑–∏
                (AI)</button>
        </div>
    </aside>

    <main class="graph-container">
        <div id="graph"></div>
        <div id="graph-3d" style="display: none;"></div>

        <!-- Millionaire Game Container -->
        <div id="millionaire-game-container" class="modal-overlay" style="display: none;">
            <div class="millionaire-layout">
                <div class="millionaire-sidebar">
                    <div class="ladder-title">üí∞ PRIZE LADDER</div>
                    <div id="money-ladder" class="money-ladder">
                        <!-- Ladder items generated by JS -->
                    </div>
                </div>
                <div class="millionaire-main">
                    <div class="game-header">
                        <div class="game-logo">üß† WHO WANTS TO BE A QA ENGINEER?</div>
                        <button class="close-game-btn"
                            onclick="document.getElementById('millionaire-game-container').style.display='none'">‚úï</button>
                    </div>

                    <div id="millionaire-content" class="game-content">
                        <div class="lifelines-container">
                            <button id="lifeline-5050" class="lifeline-btn" title="50:50">
                                <span class="lifeline-icon">[50:50]</span>
                            </button>
                            <button id="lifeline-comlink" class="lifeline-btn" title="Comlink">
                                <span class="lifeline-icon">üì± COMLINK</span>
                            </button>
                            <button id="lifeline-survey" class="lifeline-btn" title="Survey">
                                <span class="lifeline-icon">üë• SURVEY</span>
                            </button>
                        </div>

                        <div class="difficulty-meter">
                            <span class="difficulty-label">DIFFICULTY:</span>
                            <div class="difficulty-bars" id="difficulty-bars">
                                <!-- Bars generated by JS -->
                            </div>
                        </div>

                        <div class="game-status-bar">
                            <div id="timer-container" class="timer-container">
                                <div id="timer-bar" class="timer-bar"></div>
                                <span id="timer-text">30</span>
                            </div>
                            <div id="second-chance-badge" class="second-chance-badge" style="display: none;">
                                üõ°Ô∏è Second Chance Active
                            </div>
                            <button id="sound-toggle-btn" class="sound-toggle-btn" title="Toggle Sound">
                                <span id="sound-icon">üîä</span>
                            </button>
                        </div>

                        <div class="question-box">
                            <div id="millionaire-question">Loading question...</div>
                        </div>

                        <div id="millionaire-answers" class="answers-grid">
                            <!-- Answers generated by JS -->
                        </div>

                        <div id="lifeline-result-area" class="lifeline-result-area" style="display: none;">
                            <!-- Dynamic content for Comlink/Survey results -->
                        </div>

                        <div id="explanation-area" class="explanation-box" style="display: none;">
                            <div class="explanation-title">üí° Explanation</div>
                            <div id="explanation-text"></div>
                            <button id="next-question-btn" class="next-btn">Next Question ‚û°Ô∏è</button>
                        </div>
                    </div>

                    <div id="millionaire-loader" class="game-loader">
                        <div class="spinner"></div>
                        <span>Asking the AI...</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div class="status" id="status">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...</div>

    <!-- Delete Confirmation Modal -->
    <div class="modal-overlay" id="deleteModal">
        <div class="modal-content">
            <div class="modal-title">‚ö†Ô∏è –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</div>
            <div class="modal-message" id="modalMessage"></div>
            <div class="modal-buttons">
                <button class="modal-btn cancel" id="cancelDeleteBtn">–û—Ç–º–µ–Ω–∞</button>
                <button class="modal-btn confirm" id="confirmDeleteBtn">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div class="modal-overlay" id="helpModal">
        <div class="modal-content">
            <div class="modal-title">‚ÑπÔ∏è –°–ø—Ä–∞–≤–∫–∞</div>
            <div class="modal-message" style="text-align: left;">
                <h4 style="color: #667eea; margin-bottom: 10px;">üîó –¢–∏–ø—ã —Å–≤—è–∑–µ–π</h4>
                <p><strong>üî¥ Causal (–ü—Ä–∏—á–∏–Ω–Ω–∞—è)</strong><br>
                    –õ–æ–≥–∏—á–µ—Å–∫–∞—è —Å–≤—è–∑—å "–ü—Ä–∏—á–∏–Ω–∞ ‚Üí –°–ª–µ–¥—Å—Ç–≤–∏–µ". –ò–∑—É—á–µ–Ω–∏–µ –æ–¥–Ω–æ–π —Ç–µ–º—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –¥—Ä—É–≥–æ–π.</p>
                <br>
                <p><strong>üîµ Multiway (–ü–µ—Ä–µ—Ö–æ–¥)</strong><br>
                    –ê—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω–∞—è —Å–≤—è–∑—å. –¢–µ–º—ã —Å–≤—è–∑–∞–Ω—ã –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º, –Ω–æ –Ω–µ –∑–∞–≤–∏—Å—è—Ç –∂–µ—Å—Ç–∫–æ.</p>
                <br>
                <p><strong>üü¢ Branchial (–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞)</strong><br>
                    –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å–≤—è–∑—å. –û–±—ä–µ–¥–∏–Ω—è–µ—Ç —É–∑–ª—ã –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã" -> "Selenium").</p>

                <hr style="border: 0; border-top: 1px solid #333; margin: 20px 0;">

                <h4 style="color: #667eea; margin-bottom: 10px;">üîÑ Learning Loop</h4>
                <p>–°–∏—Å—Ç–µ–º–∞ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ –≤–∞—à–∏ –∑–Ω–∞–Ω–∏—è:</p>
                <ul style="padding-left: 20px; margin-top: 8px; color: #aaa; font-size: 0.9rem; line-height: 1.6;">
                    <li><strong>üéØ –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å:</strong> –í–æ–ø—Ä–æ—Å—ã –ø–æ —Å–ª–∞–±—ã–º —Ç–µ–º–∞–º –ø–æ—è–≤–ª—è—é—Ç—Å—è —á–∞—â–µ.</li>
                    <li><strong>‚ûï –†–æ—Å—Ç –≥—Ä–∞—Ñ–∞:</strong> –î–æ–±–∞–≤–ª—è–π—Ç–µ –Ω–æ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ç—ã –∏–∑ –æ—à–∏–±–æ–∫ –ø—Ä—è–º–æ –≤ –≥—Ä–∞—Ñ.</li>
                    <li><strong>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</strong> –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ –ø–∞–Ω–µ–ª–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.</li>
                </ul>
            </div>
            <div class="modal-buttons">
                <button class="modal-btn confirm" id="closeHelpBtn">–ü–æ–Ω—è—Ç–Ω–æ</button>
            </div>
        </div>
    </div>

    <script type="module" src="js/main.js"></script>
</body>

</html>